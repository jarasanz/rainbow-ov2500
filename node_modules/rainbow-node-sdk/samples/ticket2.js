var NodeSDK = require("../index.js");

var nodeSDK = new NodeSDK({
    rainbow: {
        "host": "sandbox.openrainbow.com",
        "mode": "xmpp"
    },
    credentials: {
        "login": "",
        "password": ""
    },
    application: {
        "appID": "",
        "appSecret": ""
    },
    logs: {
        enableConsoleLogs: true,
        enableFileLogs: false,
        file: {
            path: "/var/tmp/rainbowsdk/",
            level: "debug"
        }
    },
    im: {
        sendReadReceipt: true  //false to not send a read receipt automatically
    }
});

nodeSDK.events.on('rainbow_onstarted', () => {
    console.log("[EVT] :: rainbow_onstarted");
});

nodeSDK.events.on('rainbow_onconnected', () => {
    console.log("[EVT] :: rainbow_onconnected");
});

nodeSDK.events.on('rainbow_ondisconnected', () => {
    console.log("[EVT] :: rainbow_ondisconnected");
});

nodeSDK.events.on('rainbow_onready', () => {
    console.log("[EVT] :: rainbow_onready");
});

nodeSDK.events.on('rainbow_onstopped', () => {
    console.log("[EVT] :: rainbow_onstopped");
});

nodeSDK.start().then( () => {
    console.log("[EVT] :: after start()");
    nodeSDK.stop().then( () => {
        console.log("[EVT] :: after stop()");
        nodeSDK.start().then( () => {
            console.log("[EVT] :: after restart()");
        });
    });
});
